<div id="admin-product-form-container " class="p-5">
  <h1>Product Form</h1>
  <div class="product-form">
    <form [formGroup]="productForm">
      <div class="row">
        <div class="col-lg-4 col-md-4 col-sm-12 col-12">
          <mat-form-field appearance="outline">
            <mat-label>Select Product Category</mat-label>
            <mat-select
              formControlName="productCategory"
              (selectionChange)="onCategorySelection($event)"
            >
              <mat-option *ngFor="let item of listingcategory" [value]="item">
                {{ item.categoryName }}
              </mat-option>
            </mat-select>
            <!-- <select
              matNativeControl
              [(ngModel)]="productData.categoryId"
              formControlName="productCategory"
              (change)="onCategorySelection($event)"
            >
              <option *ngFor="let item of listingcategory" [value]="item.id">
                {{ item.categoryName }}
              </option>
            </select> -->
          </mat-form-field>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-12 col-12">
          <mat-form-field appearance="outline">
            <mat-label>Select Product Subcategory</mat-label>
            <mat-select
              formControlName="productSubCategory"
              [(ngModel)]="productData.subCategoryId"
            >
              <mat-option *ngFor="let item of filteredSubCategories" [value]="item">
                {{ item.categoryName }}
              </mat-option>
            </mat-select>
            <!-- <select
              matNativeControl
              [(ngModel)]="productData.subCategoryId"
              formControlName="productSubCategory"
            >
              <option
                *ngFor="let item of filteredSubCategories"
                [value]="item.id"
              >
                {{ item.categoryName }}
              </option>
            </select> -->
          </mat-form-field>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-12 col-12">
          <mat-form-field hintLabel="Max 100 characters" appearance="outline">
            <mat-label>Product Name</mat-label>
            <input
              matInput
              #input
              maxlength="100"
              formControlName="productName"
              [(ngModel)]="productData.name"
              placeholder="Ex. Nougat"
            />
            <mat-hint align="end">{{ input.value?.length || 0 }}/100</mat-hint>
          </mat-form-field>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-12 col-12">
          <mat-form-field appearance="outline">
            <mat-label>Price</mat-label>
            <input
              matInput
              formControlName="price"
              [(ngModel)]="productData.mrp"
              placeholder="Price"
            />
          </mat-form-field>
        </div>

        <div class="col-lg-4 col-md-4 col-sm-12 col-12">
          <mat-form-field appearance="outline">
            <mat-label>Date of delivery</mat-label>
            <input
              matInput
              formControlName="dateDelivery"
              [matDatepicker]="picker"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="picker"
            ></mat-datepicker-toggle>

            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12 col-12">
          <mat-label>Product Description</mat-label>
          <angular-editor
            formControlName="productDescription"
            [(ngModel)]="productData.description"
            [config]="config"
          ></angular-editor>
        </div>
        <div class="row mt-4">
          <h1>Product Optional fields</h1>
        </div>

        <div class="col-lg-4 col-md-4 col-sm-12 col-12">
          <mat-form-field appearance="outline">
            <mat-label>Select Template</mat-label>
            <mat-select
              formControlName="templateId"
              (selectionChange)="onTemplateSelection($event)"
              [(ngModel)]="productData.templateId"
            >
              <mat-option *ngFor="let item of templateData;" [value]="item">
                {{ item.templateName }}
              </mat-option>
            </mat-select>
            <!-- <select
              matNativeControl
              [(ngModel)]="productData.templateId"
              formControlName="templateId"
              (selectionChange)="onTemplateSelection($event)"
            >
              <option *ngFor="let item of templateData" [value]="item.id">
                {{ item.templateName }}
              </option>
            </select> -->
          </mat-form-field>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-12 col-12">
          <mat-form-field appearance="outline">
            <mat-label>Inventory </mat-label>
            <input
              matInput
              formControlName="inventory"
              placeholder="Inventory"
              [(ngModel)]="productData.inventory"
            />
          </mat-form-field>
        </div>

        <div class="col-lg-4 col-md-4 col-sm-12 col-12">
          <mat-form-field appearance="outline">
            <mat-label>Bulk Quantity </mat-label>
            <input
              matInput
              formControlName="bulkQuantity"
              placeholder="Bulk Quantity"
              [(ngModel)]="productData.bulkQuantity"
            />
          </mat-form-field>
        </div>

        <div class="col-lg-4 col-md-4 col-sm-12 col-12">
          <mat-form-field appearance="outline">
            <mat-label>Bulk quantity price</mat-label>
            <input
              matInput
              formControlName="bulkPrice"
              placeholder="Bulk quantity price"
              [(ngModel)]="productData.bulkPrice"
            />
          </mat-form-field>
        </div>

        <div class="row" *ngIf="showVariants">
          <div class="col-lg-4 col-md-4 col-sm-12 col-12">
            <mat-form-field
              appearance="outline"
              *ngIf="selectedTemplate?.tag1 != null"
            >
              <mat-label>{{ selectedTemplate?.tag1 }}</mat-label>
              <input
                matInput
                #input
                formControlName="tag1"
                placeholder="{{ selectedTemplate?.tag1 }}"
                [(ngModel)]="productData.tag1"
              />
            </mat-form-field>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-12 col-12">
            <mat-form-field
              appearance="outline"
              *ngIf="selectedTemplate?.tag2 != null"
            >
              <mat-label>{{ selectedTemplate?.tag2 }}</mat-label>
              <input
                matInput
                #input
                formControlName="tag2"
                placeholder="{{ selectedTemplate?.tag2 }}"
                [(ngModel)]="productData.tag2"
              />
            </mat-form-field>
          </div>

          <div class="col-lg-4 col-md-4 col-sm-12 col-12">
            <mat-form-field
              appearance="outline"
              *ngIf="selectedTemplate?.tag3 != null"
            >
              <mat-label>{{ selectedTemplate?.tag3 }}</mat-label>
              <input
                matInput
                #input
                formControlName="tag3"
                placeholder="{{ selectedTemplate?.tag3 }}"
                [(ngModel)]="productData.tag3"
              />
            </mat-form-field>
          </div>

          <div class="col-lg-4 col-md-4 col-sm-12 col-12">
            <mat-form-field
              appearance="outline"
              *ngIf="selectedTemplate?.tag4 != null"
            >
              <mat-label>{{ selectedTemplate?.tag4 }}</mat-label>
              <input
                matInput
                #input
                formControlName="tag4"
                placeholder="{{ selectedTemplate?.tag4 }}"
                [(ngModel)]="productData.tag4"
              />
            </mat-form-field>
          </div>

          <div class="col-lg-4 col-md-4 col-sm-12 col-12">
            <mat-form-field
              appearance="outline"
              *ngIf="selectedTemplate?.tag5 != null"
            >
              <mat-label>{{ selectedTemplate?.tag5 }}</mat-label>
              <input
                matInput
                #input
                formControlName="tag5"
                placeholder="{{ selectedTemplate?.tag5 }}"
                [(ngModel)]="productData.tag5"
              />
            </mat-form-field>
          </div>

          <div class="col-lg-4 col-md-4 col-sm-12 col-12">
            <mat-form-field
              appearance="outline"
              *ngIf="selectedTemplate?.tag6 != null"
            >
              <mat-label>{{ selectedTemplate?.tag6 }}</mat-label>
              <input
                matInput
                #input
                formControlName="tag6"
                placeholder="{{ selectedTemplate?.tag6 }}"
                [(ngModel)]="productData.tag6"
              />
            </mat-form-field>
          </div>
        </div>

        <div class="col-lg-4 col-md-4 col-sm-12 col-12">
          <div>
            <input
              type="file"
              id="fileInput"
              name="fileInput"
              accept="image/*"
              multiple
              (change)="onFileChanged($event)"
            />
          </div>
          <div class="image-body" *ngIf="!!imageData">
            <img [src]="imageData" />
          </div>
        </div>

        <div class="col-lg-12 col-md-12 col-sm-12 col-12">
          <button mat-raised-button color="primary" (click)="onProductSave()">
            Submit
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
